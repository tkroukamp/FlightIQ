{
  "name": "LIVE - [SUBFLOW Ver 1.0.0] - Remove Invalid EMails from MFA",
  "description": "Migrated from Test Destination via FlightIQ Director on 02/04/2026 12:13",
  "enabled": true,
  "publishedVersion": 7,
  "connectors": [
    {
      "id": "functionsConnector"
    },
    {
      "id": "pingOneSSOConnector"
    },
    {
      "id": "pingOneMfaConnector"
    },
    {
      "id": "httpConnector"
    }
  ],
  "settings": {
    "logLevel": 4,
    "useCustomTimeoutErrorScreen": true,
    "customTimeoutErrorScreenHTML": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    \n    <link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\">\n    <title>Document</title>\n</head>\n<body>\n    <div>\n        <div class='error-page--wrapper-main'>\n        <div class=\"error-page--image-wrapper\">\n          <div class=\"error-page---image\">\n            <div class=\"error-page--content-wrapper\">\n              <div class=\"error-page--content\">\n                <div class=\"information-block-container error-page--info-block\">\n                  <h1 class=\"custom-heading--h1 heading--light\" aria-label=\"Our Website is down for planned maintenance.\">Your session has expired.</h1>\n                  <div class=\"paragraph-div custom-text--regular custom-text--normal custom-text--light custom-text--body text-error-page--info-block\" role=\"article\">\n                    <p>Please login in again.</p>\n                  </div>\n                  <div class=\"info-actions\"></div>\n                </div>\n              </div>\n            </div>\n<!--            <div class=\"error-page-text-footer\">\n                <div class=\"error-page-text-footer-content\">\n                  Hot Air ballon landing in Hyatt Residence Club Pinon Pointe, Sedona Arizona\n                </div>\n            </div>\n-->\n          </div>\n        </div>\n      </div>\n    </div>\n</body>\n</html>\n",
    "customTimeoutErrorScreenCSS": ".error-page--wrapper-main {\n    background-color: #f4f5f6;\n    position: relative;\n}\n.error-page---image {\n    background-image: linear-gradient(rgba(0, 0, 0, 0.5) 0%, rgba(0, 0, 0, 0) 49.48%, rgba(0, 0, 0, 0.5) 100%), url(error_bg_image.png);\n}\n.error-page--wrapper-main .error-page---image {\n    align-items: center;\n    background-position: 50%;\n    background-repeat: no-repeat;\n    background-size: cover;\n    display: flex;\n    flex-direction: row;\n    gap: 0;\n    height: 1000px;\n    isolation: isolate;\n    justify-content: center;\n    position: relative;\n    width: 100%;\n    z-index: 0;\n}\n.error-page--wrapper-main .error-page--content-wrapper {\n    align-items: center;\n    background: #fff;\n    border-radius: 16px;\n    box-shadow: 0 16px 32px rgba(0, 0, 0, .05);\n    display: flex;\n    flex-direction: column;\n    gap: 2.5rem;\n    max-width: 600px;\n    padding: 2.125rem 6.5rem;\n    width: 56.07%;\n    z-index: 1;\n}\n.error-page--wrapper-main .error-page--content {\n    align-items: center;\n    display: flex;\n    flex-direction: column;\n    gap: 0;\n    justify-content: center;\n}\n.error-page--wrapper-main .error-page--info-block {\n    align-items: center;\n    display: flex;\n    flex-direction: column;\n    gap: 0;\n    justify-content: center;\n    text-align: center;\n}\n.error-page--wrapper-main .custom-heading--h5.heading--light {\n    color: #9c3e0c;\n    font-size: 14px;\n    line-height: 150%;\n}\n.error-page--wrapper-main .custom-heading--h5 {\n    letter-spacing: 0.1em;\n    text-transform: uppercase;\n    font-family: \"Roboto\", sans-serif;\n}\n.error-page--wrapper-main .error-page--button-wrapper {\n    display: flex;\n    justify-content: center;\n    padding: 0;\n    width: 100%;\n}\n.error-page--wrapper-main a {\n    color: inherit !important;\n    text-decoration: underline !important;\n}\n.custom-heading--h1 {\n    font-size: 2.5rem;\n    font-weight: 400;\n    letter-spacing: 0;\n    line-height: 125%;\n    text-transform: none;\n    margin-top: 0 !important;\n    margin-bottom: 0 !important;\n    font-family: \"Tenor Sans\", sans-serif;\n}\n.custom-text--regular {\n    font-family: \"Tenor Sans\", sans-serif !important;\n    font-size: 1rem;\n    letter-spacing: 0;\n    line-height: 150%;\n    text-decoration: none;\n    font-weight: 400;\n}\n.information-block-container .info-actions {\n    align-items: center;\n    display: flex;\n    flex-direction: row;\n    gap: 0.5rem;\n}\n.information-block-container p {\n    color: #222;\n    margin: 1.5rem 0;\n}\n.custom-button--primary, .custom-button--primaryChevron {\n    background: #26828e;\n    border: 0;\n    border-radius: 3em !important;\n    color: #fff;\n    cursor: pointer !important;\n    display: inline-block;\n    font-family: \"Roboto\", sans-serif;\n    font-weight: 700;\n}\n.custom-button--medium {\n    font-size: 0.8rem;\n    height: 2.5rem;\n    padding: 0 1.5rem;\n}\n.custom-button--primary:hover, .custom-button--primaryChevron:hover {\n    background-color: #30a6b5;\n}\n.error-page-text-footer {\n    bottom: 0;\n    left: 0;\n    position: absolute;\n    background-color: #141312;\n    opacity: 0.7;\n    color: #d4d2cf;\n    width: 25%;\n    font-size: 12px;\n    padding: 0.5rem 1.5rem;\n    border-top-right-radius: 0.5rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n}\n.error-page-text-footer-content {\n    text-decoration-line: none !important;\n    font-weight: 400;\n    font-family: \"Tenor Sans\", sans-serif;\n}\n@media screen and (max-width: 768px) {\n    .error-page--wrapper-main .error-page--content-wrapper {\n        align-items: center;\n        display: flex;\n        flex-direction: column;\n        gap: 0.5rem;\n        padding: 2.125rem 1.1875rem;\n        width: 98%;\n   }\n    .error-page--wrapper-main .custom-heading--h1 {\n        font-size: 2.25rem;\n   }\n}\n",
    "csp": ""
  },
  "color": "#CACED3",
  "graphData": {
    "elements": {
      "nodes": [
        {
          "data": {
            "id": "7reye1na3m",
            "nodeType": "CONNECTION",
            "connectionId": "de650ca45593b82c49064ead10b9fe17",
            "connectorId": "functionsConnector",
            "name": "Functions",
            "label": "Functions",
            "status": "configured",
            "capabilityName": "customFunction",
            "type": "trigger",
            "properties": {
              "variableInputList": {
                "value": [
                  {
                    "name": "domains",
                    "preferredDataType": "string",
                    "value": "[\n  {\n    \"children\": [\n      {\n        \"text\": \"\"\n      },\n      {\n        \"text\": \"\"\n      },\n      {\n        \"type\": \"link\",\n        \"src\": \"variable.svg\",\n        \"url\": \"invalidEmailDomains\",\n        \"data\": \"{{global.company.variables.invalidEmailDomains}}\",\n        \"tooltip\": \"{{global.company.variables.invalidEmailDomains}}\",\n        \"children\": [\n          {\n            \"text\": \"invalidEmailDomains\"\n          }\n        ]\n      },\n      {\n        \"text\": \"\"\n      }\n    ]\n  }\n]"
                  },
                  {
                    "name": "devices",
                    "preferredDataType": "object",
                    "value": "[\n  {\n    \"children\": [\n      {\n        \"text\": \"\"\n      },\n      {\n        \"text\": \"\"\n      },\n      {\n        \"type\": \"link\",\n        \"src\": \"pingIdentity.svg\",\n        \"url\": \"devices\",\n        \"data\": \"{{local.1e8wrbj11b.payload.output.rawResponse._embedded.devices}}\",\n        \"tooltip\": \"{{local.1e8wrbj11b.payload.output.rawResponse._embedded.devices}}\",\n        \"children\": [\n          {\n            \"text\": \"devices\"\n          }\n        ]\n      },\n      {\n        \"text\": \"\"\n      }\n    ]\n  }\n]"
                  }
                ]
              },
              "code": {
                "value": "module.exports = a = async ({params}) => {\n    console.log('params: ', params)\n\n    try {\n        if (!params.domains || typeof params.domains !== 'string') {\n            throw new Error(\"Missing or invalid 'domains' input\")\n        }\n        if (!Array.isArray(params.devices)) {\n            throw new Error(\"Missing or invalid 'devices' input\")\n        }\n\n        const domainList = params.domains\n            .split(',')\n            .map(d => d.trim().toLowerCase())\n            .filter(d => d.length > 0)\n\n        const emailDevices = params.devices.filter(d => \n            d.type === 'EMAIL' && typeof d.email === 'string'\n        )\n\n        for (const device of emailDevices) {\n            const emailDomain = device.email.split('@')[1]?.toLowerCase()\n            if (!emailDomain) continue\n            if (!domainList.includes(emailDomain)) {\n                return { deviceId: device.id }\n            }\n        }\n\n        throw new Error(\"No EMAIL device found with a non-matching domain\")\n    } catch (err) {\n        console.error('Error: ', err)\n        throw new Error(err.message)\n    }\n}\n"
              },
              "outputSchema": {
                "value": "{\n  \"output\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"deviceId\": {\n        \"type\": \"string\"\n      }\n    }\n  }\n}\n"
              },
              "nodeTitle": {
                "value": "Determine Invalid Email Domains"
              },
              "backgroundColor": {
                "value": "#9b9b9bff"
              }
            }
          },
          "position": {
            "x": 364,
            "y": 356
          },
          "group": "nodes",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": false,
          "classes": ""
        },
        {
          "data": {
            "id": "igvp44kqec",
            "nodeType": "CONNECTION",
            "connectionId": "94141bf2f1b9b59a5f5365ff135e02bb",
            "connectorId": "pingOneSSOConnector",
            "name": "PingOne",
            "label": "PingOne",
            "status": "configured",
            "capabilityName": "userLookup",
            "type": "action",
            "properties": {
              "matchAttributes": {
                "value": [
                  "username"
                ]
              },
              "userIdentifierForFindUser": {
                "value": "[\n  {\n    \"children\": [\n      {\n        \"text\": \"\"\n      },\n      {\n        \"text\": \"\"\n      },\n      {\n        \"type\": \"link\",\n        \"src\": \"auth.svg\",\n        \"url\": \"username\",\n        \"data\": \"{{global.parameters.username}}\",\n        \"tooltip\": \"{{global.parameters.username}}\",\n        \"children\": [\n          {\n            \"text\": \"username\"\n          }\n        ]\n      },\n      {\n        \"text\": \"\"\n      }\n    ]\n  }\n]"
              },
              "nodeTitle": {
                "value": "Get User"
              }
            }
          },
          "position": {
            "x": 364,
            "y": 236
          },
          "group": "nodes",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": false,
          "classes": ""
        },
        {
          "data": {
            "id": "sq4k1w353i",
            "nodeType": "EVAL",
            "label": "Evaluator"
          },
          "position": {
            "x": 484,
            "y": 236
          },
          "group": "nodes",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": false,
          "classes": ""
        },
        {
          "data": {
            "id": "1e8wrbj11b",
            "nodeType": "CONNECTION",
            "connectionId": "b72bd44e6be8180bd5988ac74cd9c949",
            "connectorId": "pingOneMfaConnector",
            "name": "PingOne MFA",
            "label": "PingOne MFA",
            "status": "configured",
            "capabilityName": "readAllDevices",
            "type": "action",
            "properties": {
              "userId": {
                "value": "[\n  {\n    \"children\": [\n      {\n        \"text\": \"\"\n      },\n      {\n        \"text\": \"\"\n      },\n      {\n        \"type\": \"link\",\n        \"src\": \"pingIdentity.svg\",\n        \"url\": \"id\",\n        \"data\": \"{{local.igvp44kqec.payload.output.matchedUser.id}}\",\n        \"tooltip\": \"{{local.igvp44kqec.payload.output.matchedUser.id}}\",\n        \"children\": [\n          {\n            \"text\": \"id\"\n          }\n        ]\n      },\n      {\n        \"text\": \"\"\n      }\n    ]\n  }\n]"
              },
              "setFilterFlag": {
                "value": true
              },
              "deviceTypes": {
                "value": [
                  "EMAIL"
                ]
              },
              "nodeTitle": {
                "value": "Read all EMail Devices"
              }
            }
          },
          "position": {
            "x": 634,
            "y": 236
          },
          "group": "nodes",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": false,
          "classes": ""
        },
        {
          "data": {
            "id": "2wocyzlkv1",
            "nodeType": "EVAL"
          },
          "position": {
            "x": 214,
            "y": 356
          },
          "group": "nodes",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": false,
          "classes": ""
        },
        {
          "data": {
            "id": "j6d583cc1k",
            "nodeType": "EVAL",
            "label": "Evaluator",
            "properties": {
              "50gb66xxzb": {
                "value": "anyTriggersFalse"
              }
            }
          },
          "position": {
            "x": 484,
            "y": 356
          },
          "group": "nodes",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": false,
          "classes": ""
        },
        {
          "data": {
            "id": "ym9toqffq3",
            "nodeType": "CONNECTION",
            "connectionId": "b72bd44e6be8180bd5988ac74cd9c949",
            "connectorId": "pingOneMfaConnector",
            "name": "PingOne MFA",
            "label": "PingOne MFA",
            "status": "configured",
            "capabilityName": "deleteDevice",
            "type": "action",
            "properties": {
              "userId": {
                "value": "[\n  {\n    \"children\": [\n      {\n        \"text\": \"\"\n      },\n      {\n        \"text\": \"\"\n      },\n      {\n        \"type\": \"link\",\n        \"src\": \"pingIdentity.svg\",\n        \"url\": \"id\",\n        \"data\": \"{{local.igvp44kqec.payload.output.matchedUser.id}}\",\n        \"tooltip\": \"{{local.igvp44kqec.payload.output.matchedUser.id}}\",\n        \"children\": [\n          {\n            \"text\": \"id\"\n          }\n        ]\n      },\n      {\n        \"text\": \"\"\n      }\n    ]\n  }\n]"
              },
              "deviceId": {
                "value": "[\n  {\n    \"children\": [\n      {\n        \"text\": \"\"\n      },\n      {\n        \"text\": \"\"\n      },\n      {\n        \"type\": \"link\",\n        \"src\": \"functions.svg\",\n        \"url\": \"deviceId\",\n        \"data\": \"{{local.7reye1na3m.payload.output.deviceId}}\",\n        \"tooltip\": \"{{local.7reye1na3m.payload.output.deviceId}}\",\n        \"children\": [\n          {\n            \"text\": \"deviceId\"\n          }\n        ]\n      },\n      {\n        \"text\": \"\"\n      }\n    ]\n  }\n]"
              },
              "nodeTitle": {
                "value": "Delete Invalid Devices"
              }
            }
          },
          "position": {
            "x": 634,
            "y": 356
          },
          "group": "nodes",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": false,
          "classes": ""
        },
        {
          "data": {
            "id": "50gb66xxzb",
            "nodeType": "CONNECTION",
            "connectionId": "867ed4363b2bc21c860085ad2baa817d",
            "connectorId": "httpConnector",
            "name": "HTTP",
            "label": "Http",
            "status": "configured",
            "capabilityName": "createSuccessResponse",
            "type": "action",
            "properties": {
              "message": {
                "value": "[\n  {\n    \"children\": [\n      {\n        \"text\": \"\"\n      },\n      {\n        \"text\": \"\"\n      },\n      {\n        \"type\": \"link\",\n        \"src\": \"functions.svg\",\n        \"url\": \"message\",\n        \"data\": \"{{local.7reye1na3m.payload.error.message}}\",\n        \"tooltip\": \"{{local.7reye1na3m.payload.error.message}}\",\n        \"children\": [\n          {\n            \"text\": \"message\"\n          }\n        ]\n      },\n      {\n        \"text\": \"\"\n      }\n    ]\n  }\n]"
              },
              "returnRequestParameters": {
                "value": true
              },
              "backgroundColor": {
                "value": "#7ed321ff"
              },
              "nodeTitle": {
                "value": "Return success"
              }
            }
          },
          "position": {
            "x": 364,
            "y": 476
          },
          "group": "nodes",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": false,
          "classes": ""
        },
        {
          "data": {
            "id": "tge3sib1fi",
            "nodeType": "EVAL"
          },
          "position": {
            "x": 484,
            "y": 266
          },
          "group": "nodes",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": false,
          "classes": ""
        }
      ],
      "edges": [
        {
          "data": {
            "id": "7eqix6mbj2",
            "source": "7reye1na3m",
            "target": "j6d583cc1k"
          },
          "position": {
            "x": 0,
            "y": 0
          },
          "group": "edges",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": true,
          "classes": ""
        },
        {
          "data": {
            "id": "rmfj6udum0",
            "source": "igvp44kqec",
            "target": "sq4k1w353i"
          },
          "position": {
            "x": 0,
            "y": 0
          },
          "group": "edges",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": true,
          "classes": ""
        },
        {
          "data": {
            "id": "gmbsovo277",
            "source": "sq4k1w353i",
            "target": "1e8wrbj11b"
          },
          "position": {
            "x": 0,
            "y": 0
          },
          "group": "edges",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": true,
          "classes": ""
        },
        {
          "data": {
            "id": "qkvb0o3er9",
            "source": "1e8wrbj11b",
            "target": "2wocyzlkv1"
          },
          "position": {
            "x": 0,
            "y": 0
          },
          "group": "edges",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": true,
          "classes": ""
        },
        {
          "data": {
            "id": "vh3bys4pqp",
            "source": "2wocyzlkv1",
            "target": "7reye1na3m"
          },
          "position": {
            "x": 0,
            "y": 0
          },
          "group": "edges",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": true,
          "classes": ""
        },
        {
          "data": {
            "id": "cuzw4xi784",
            "source": "j6d583cc1k",
            "target": "ym9toqffq3"
          },
          "position": {
            "x": 0,
            "y": 0
          },
          "group": "edges",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": true,
          "classes": ""
        },
        {
          "data": {
            "id": "r4mswgklad",
            "source": "j6d583cc1k",
            "target": "50gb66xxzb"
          },
          "position": {
            "x": 0,
            "y": 0
          },
          "group": "edges",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": true,
          "classes": ""
        },
        {
          "data": {
            "id": "yu3ury4zzy",
            "source": "ym9toqffq3",
            "target": "tge3sib1fi"
          },
          "position": {
            "x": 0,
            "y": 0
          },
          "group": "edges",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": true,
          "classes": ""
        },
        {
          "data": {
            "id": "l5gd6egzud",
            "source": "tge3sib1fi",
            "target": "1e8wrbj11b"
          },
          "position": {
            "x": 0,
            "y": 0
          },
          "group": "edges",
          "removed": false,
          "selected": false,
          "selectable": true,
          "locked": false,
          "grabbable": true,
          "pannable": true,
          "classes": ""
        }
      ]
    },
    "data": {},
    "zoomingEnabled": true,
    "userZoomingEnabled": true,
    "zoom": 1,
    "minZoom": 1e-50,
    "maxZoom": 1e+50,
    "panningEnabled": true,
    "userPanningEnabled": true,
    "pan": {
      "x": 0,
      "y": 0
    },
    "boxSelectionEnabled": true,
    "renderer": {
      "name": "null"
    }
  },
  "inputSchema": [
    {
      "propertyName": "username",
      "preferredDataType": "string",
      "required": false,
      "description": ""
    }
  ],
  "deployedAt": "2026-02-06T18:35:08.359Z"
}